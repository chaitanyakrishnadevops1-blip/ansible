- name: functions
  hosts: local
  connection: local
  vars:
     technologies: Devops,Linux,Shell,Ansible # string
     name: "Krishna"
     gmail:   Info@gmail.com
     ipaddress: "192.168.0.1"
    #  dictionary == map
     tags:
        Application: payment 
        Environment: dev
    # lists
     listTags: 
     - key: Application
       value: payment 
     - key: Application
       value: Dev
  tasks:
  - name: default variable
    ansible.builtin.debug:
      msg: "Hello, {{ name | default('Ramesh') }}"

  # string to list 
  - name: convert string to list 
    ansible.builtin.debug:
      msg: "Technologies are:  {{ technologies | split(',') }}"
  # map to list 
  - name: convert map to list 
    ansible.builtin.debug:
        msg: "Tags are: {{ tags | dict2items }}"
  - name: convert list to map 
    ansible.builtin.debug:
        msg: "tag map: {{ listTags | items2dict }}"

  - name: convert uppercase 
    ansible.builtin.debug: 
      msg: "{{ name | upper }}"
  
  -  name:  convert lowercase 
     ansible.builtin.debug:
        msg: "{{ name | lower }}"
  - name: check IP is valid or not 
    ansible.builtin.debug: 
       msg: "{{ ipaddress | ansible.utils.ipv4 }}"

  - name: grep for root
    ansible.builtin.shell: cat /etc/passwd | grep root 
    register: command_output
  
  - name: print the command_output
    ansible.builtin.debug: 
      msg: "{{ command_output }}"
  
  - name:  redirect the output
    ansible.builtin.command: ls -1tr > /tmp/output.txt
    register: redirect_output
    ignore_errors: true

  - name: print redirect_output
    ansible.builtin.debug:
       msg: "{{ redirect_output }}"

  - name: redirect the output using shell
    ansible.builtin.shell: ls -1tr > /tmp/output.txt
    register: redirect_output
  
  - name: print redirect_output shell
    ansible.built.debug:
    msg:  "{{ redirect_output }}"
     
     
      
